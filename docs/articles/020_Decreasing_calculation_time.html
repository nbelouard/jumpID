<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>#2: Decreasing calculation time â€¢ jumpID</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="#2: Decreasing calculation time">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">jumpID</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/010_Jump_list.html">#1: Isolating dispersal jumps and diffusive spread</a></li>
    <li><a class="dropdown-item" href="../articles/011_Figures_jump_list.html">#1B Creating the figures associated with the jump analysis</a></li>
    <li><a class="dropdown-item" href="../articles/020_Decreasing_calculation_time.html">#2: Decreasing calculation time</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nbelouard/jumpID/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>#2: Decreasing calculation time</h1>
                        <h4 data-toc-skip class="author">Nadege
Belouard<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;iEco lab at Temple University, Ecobio lab at the
University of Rennes, &lt;a href="mailto:nadege.belouard@gmail.com" class="email"&gt;nadege.belouard@gmail.com&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a>
</h4>
            
            <h4 data-toc-skip class="date">2024-08-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/nbelouard/jumpID/blob/HEAD/vignettes/020_Decreasing_calculation_time.Rmd" class="external-link"><code>vignettes/020_Decreasing_calculation_time.Rmd</code></a></small>
      <div class="d-none name"><code>020_Decreasing_calculation_time.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="aim-and-setup">Aim and setup<a class="anchor" aria-label="anchor" href="#aim-and-setup"></a>
</h2>
<p>In case of extremely large species occurrence datasets, it may take a
long time to run the analyses. Any number of sectors will provide the
accurate results. However, computational time may be decreased by
increasing the number of sectors considered. The higher the number of
sectors, the larger the invasion radius at which points are compared by
pairs in <code>find_thresholds</code>, so the fewer distances need to be
calculated. However, the lower the number of sectors, the better
pre-identification of spatial discontinuities and the more pruned the
list of potential jumps, so the faster <code>find_jumps</code>. The
lowest computational time is therefore obtained by a trade-off between
dataset size, invasion radius, and number of sectors.</p>
<p>We demonstrate the effect of the number of sectors on computational
time on the SLF dataset.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span>  </span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'dplyr'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     filter, lag</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:base':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     intersect, setdiff, setequal, union</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nbelouard.github.io/slfjumps/" class="external-link">jumpID</a></span><span class="op">)</span></span></code></pre></div>
<p>Load the grid data created in the first vignette</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grid_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"exported-data"</span>, <span class="st">"grid_data.csv"</span><span class="op">)</span><span class="op">)</span>  </span></code></pre></div>
</div>
<div class="section level2">
<h2 id="compare-calculation-times">Compare calculation times<a class="anchor" aria-label="anchor" href="#compare-calculation-times"></a>
</h2>
<p>Run the jumpID functions successively for 16, 40, and 80 sectors and
compare computation times.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sectors</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">16</span>,<span class="fl">40</span>,<span class="fl">80</span><span class="op">)</span></span>
<span></span>
<span><span class="va">optim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>s <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>                       Time_sectors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                       Time_thresholds <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                       potJumps <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>                       Time_jumps <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                       Jumps <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>                       Time_secDiff <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">s</span> <span class="kw">in</span> <span class="va">sectors</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Sectors: "</span>, <span class="va">s</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co">#1 Attribute sectors</span></span>
<span>  <span class="va">start.time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">grid_data_sectors</span> <span class="op">&lt;-</span> <span class="fu">jumpID</span><span class="fu">::</span><span class="fu"><a href="../reference/attribute_sectors.html">attribute_sectors</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="va">grid_data</span>, </span>
<span>                                                   nb_sectors <span class="op">=</span> <span class="va">s</span>, </span>
<span>                                                   centroid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">75.675340</span>, <span class="fl">40.415240</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  </span>
<span>  </span>
<span>  <span class="co">#2 Find thresholds</span></span>
<span>  <span class="va">Results_thresholds</span> <span class="op">&lt;-</span> <span class="fu">jumpID</span><span class="fu">::</span><span class="fu"><a href="../reference/find_thresholds.html">find_thresholds</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="va">grid_data_sectors</span>, </span>
<span>                                                  gap_size <span class="op">=</span> <span class="fl">15</span>, </span>
<span>                                                  negatives <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="va">preDist</span> <span class="op">&lt;-</span> <span class="va">Results_thresholds</span><span class="op">$</span><span class="va">preDist</span> </span>
<span>  <span class="va">potJumps</span> <span class="op">&lt;-</span> <span class="va">Results_thresholds</span><span class="op">$</span><span class="va">potJumps</span> </span>
<span>  </span>
<span>  </span>
<span>  </span>
<span>  <span class="co">#3 Find jumps</span></span>
<span>  <span class="va">Results_jumps</span> <span class="op">&lt;-</span> <span class="fu">jumpID</span><span class="fu">::</span><span class="fu"><a href="../reference/find_jumps.html">find_jumps</a></span><span class="op">(</span>grid_data <span class="op">=</span> <span class="va">grid_data</span>, </span>
<span>                                        potJumps <span class="op">=</span> <span class="va">potJumps</span>,</span>
<span>                                        gap_size <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span>  <span class="va">Jumps</span> <span class="op">&lt;-</span> <span class="va">Results_jumps</span><span class="op">$</span><span class="va">Jumps</span> </span>
<span>  <span class="va">diffusers</span> <span class="op">&lt;-</span> <span class="va">Results_jumps</span><span class="op">$</span><span class="va">diffusers</span> </span>
<span>  <span class="va">potDiffusion</span> <span class="op">&lt;-</span> <span class="va">Results_jumps</span><span class="op">$</span><span class="va">potDiffusion</span> </span>
<span></span>
<span>  </span>
<span>  </span>
<span>  <span class="co">#4 Find sec diff</span></span>
<span>  <span class="va">Results_secDiff</span> <span class="op">&lt;-</span> <span class="fu">jumpID</span><span class="fu">::</span><span class="fu"><a href="../reference/find_secDiff.html">find_secDiff</a></span><span class="op">(</span>potDiffusion <span class="op">=</span> <span class="va">potDiffusion</span>,</span>
<span>                                            Jumps <span class="op">=</span> <span class="va">Jumps</span>,</span>
<span>                                            diffusers <span class="op">=</span> <span class="va">diffusers</span>,</span>
<span>                                            Dist <span class="op">=</span> <span class="va">preDist</span>,</span>
<span>                                            gap_size <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span>  <span class="va">end.time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">time.taken</span>  <span class="op">&lt;-</span> <span class="va">end.time</span> <span class="op">-</span> <span class="va">start.time</span></span>
<span>  </span>
<span>  </span>
<span>  </span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>s <span class="op">=</span> <span class="va">s</span>, </span>
<span>                       potJumps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">potJumps</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, </span>
<span>                       Jumps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">Jumps</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, </span>
<span>                       Total_time <span class="op">=</span> <span class="va">time.taken</span><span class="op">)</span></span>
<span>  <span class="va">optim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">optim</span>, <span class="va">result</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Sectors: 16"</span></span>
<span><span class="co">## 2024-08-21 10:59:55.5739 Start sector attribution... Sector attribution completed. </span></span>
<span><span class="co">## 2024-08-21 10:59:55.617415 Start finding thresholds... Sector 1/16...  2/16...  3/16...  4/16...  5/16...  6/16...  7/16...  8/16...  9/16...  10/16...  11/16...  12/16...  13/16...  14/16...  15/16...  16/16</span></span>
<span><span class="co">## Threshold analysis done. 4243 potential jumps were found. </span></span>
<span><span class="co">## 2024-08-21 11:07:04.598694 Start finding jumps... Year 2014 ... Year 2015 ... Year 2016 ... Year 2017 ... Year 2018 ... Year 2019 ... Year 2020 ... Year 2021 ... Year 2022 ... Jump analysis done. 387 jumps were identified.</span></span>
<span><span class="co">## 2024-08-21 11:07:32.051904 Start finding secondary diffusion... Year 2017 ...Year 2018 ...Year 2019 ...Year 2020 ...Year 2021 ...Year 2022 ...Analysis of secondary diffusion done. </span></span>
<span><span class="co">## [1] "Sectors: 40"</span></span>
<span><span class="co">## 2024-08-21 11:08:41.072497 Start sector attribution... Sector attribution completed. </span></span>
<span><span class="co">## 2024-08-21 11:08:41.092574 Start finding thresholds... Sector 1/40...  2/40...  3/40...  4/40...  5/40...  6/40...  7/40...  8/40...  9/40...  10/40...  11/40...  12/40...  13/40...  14/40...  15/40...  16/40...  17/40...  18/40...  19/40...  20/40...  21/40...  22/40...  23/40...  24/40...  25/40...  26/40...  27/40...  28/40...  29/40...  30/40...  31/40...  32/40...  33/40...  34/40...  35/40...  36/40...  37/40...  38/40...  39/40...  40/40</span></span>
<span><span class="co">## Threshold analysis done. 3747 potential jumps were found. </span></span>
<span><span class="co">## 2024-08-21 11:10:32.827852 Start finding jumps... Year 2014 ... Year 2015 ... Year 2016 ... Year 2017 ... Year 2018 ... Year 2019 ... Year 2020 ... Year 2021 ... Year 2022 ... Jump analysis done. 387 jumps were identified.</span></span>
<span><span class="co">## 2024-08-21 11:10:52.568055 Start finding secondary diffusion... Year 2016 ...Year 2017 ...Year 2018 ...Year 2019 ...Year 2020 ...Year 2021 ...Year 2022 ...Analysis of secondary diffusion done. </span></span>
<span><span class="co">## [1] "Sectors: 80"</span></span>
<span><span class="co">## 2024-08-21 11:11:38.335999 Start sector attribution... Sector attribution completed. </span></span>
<span><span class="co">## 2024-08-21 11:11:38.355708 Start finding thresholds... Sector 1/80...  2/80...  3/80...  4/80...  5/80...  6/80...  7/80...  8/80...  9/80...  10/80...  11/80...  12/80...  13/80...  14/80...  15/80...  16/80...  17/80...  18/80...  19/80...  20/80...  21/80...  22/80...  23/80... Warning: no negative survey in the gap identified in sector 23 and year 2021 after 106 km. The spatial discontinuity that is identified may be due to few surveys done in this area, or space divided into too many sectors. Consider decreasing the number of sectors </span></span>
<span><span class="co">## Warning: no negative survey in the gap identified in sector 23 and year 2022 after 106 km. The spatial discontinuity that is identified may be due to few surveys done in this area, or space divided into too many sectors. Consider decreasing the number of sectors </span></span>
<span><span class="co">##  24/80...  25/80...  26/80...  27/80...  28/80...  29/80...  30/80...  31/80...  32/80...  33/80... Warning: no negative survey in the gap identified in sector 33 and year 2019 after 113 km. The spatial discontinuity that is identified may be due to few surveys done in this area, or space divided into too many sectors. Consider decreasing the number of sectors </span></span>
<span><span class="co">## Warning: no negative survey in the gap identified in sector 33 and year 2020 after 113 km. The spatial discontinuity that is identified may be due to few surveys done in this area, or space divided into too many sectors. Consider decreasing the number of sectors </span></span>
<span><span class="co">##  34/80...  35/80...  36/80...  37/80...  38/80...  39/80...  40/80...  41/80...  42/80...  43/80...  44/80...  45/80...  46/80...  47/80...  48/80...  49/80...  50/80...  51/80...  52/80...  53/80...  54/80...  55/80...  56/80...  57/80...  58/80...  59/80...  60/80...  61/80...  62/80...  63/80...  64/80...  65/80...  66/80...  67/80...  68/80...  69/80...  70/80...  71/80...  72/80...  73/80...  74/80...  75/80...  76/80...  77/80...  78/80...  79/80...  80/80</span></span>
<span><span class="co">## Threshold analysis done. 5034 potential jumps were found. </span></span>
<span><span class="co">## 2024-08-21 11:11:57.524294 Start finding jumps... Year 2014 ... Year 2015 ... Year 2016 ... Year 2017 ... Year 2018 ... Year 2019 ... Year 2020 ... Year 2021 ... Year 2022 ... Jump analysis done. 387 jumps were identified.</span></span>
<span><span class="co">## 2024-08-21 11:12:33.263233 Start finding secondary diffusion... Year 2016 ...Year 2017 ...Year 2018 ...Year 2019 ...Year 2020 ...Year 2021 ...Year 2022 ...Analysis of secondary diffusion done.</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">optim</span></span></code></pre></div>
<pre><code><span><span class="co">##    s potJumps Jumps    Total_time</span></span>
<span><span class="co">## 1 16     4243   387 8.758302 mins</span></span>
<span><span class="co">## 2 40     3747   387 2.954376 mins</span></span>
<span><span class="co">## 3 80     5034   387 2.172461 mins</span></span></code></pre>
<p>For this dataset, all computational times are decreased by dividing
space into 40 sectors instead of 16. Data is not dense enough for
dividing space into 80 sectors, as indicated by multiple warning
messages from <code>find_threshold</code>.</p>
<p>â€“ end of vignette â€“</p>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by NadÃ¨ge Belouard.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
